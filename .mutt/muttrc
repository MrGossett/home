set mbox_type           = Maildir

# directories and commands
set folder              = ~/Mail
set alias_file          = ~/.mutt/alias                          # alias file
set editor              = "vim -c '+/^--.$/-1'"
set imap_peek           = no                                     # Gmail mark as read
set sleep_time          = 0                                      # instantaneous mailbox change

### main options
set timeout             = 3                                      # idle time before scanning
set mail_check          = 0                                      # minimum time between scans
set sort_alias          = alias                                  # sort alias file by alias
set reverse_alias                                                # show names from alias file in index
unset move                                                       # gmail does that
set delete                                                       # don't ask, just do
unset confirmappend                                              # don't ask, just do!
set quit                                                         # don't ask, just do!!
unset mark_old                                                   # read/new is good enough for me
set text_flowed         = yes                                    # no hard breaks in quoted text
unset help

# index options
set sort                = threads                                # like gmail
set sort_aux            = reverse-last-date-received             # like gmail
set uncollapse_jump                                              # don't collapse on an unread message
set sort_re                                                      # thread based on regex below
set reply_regexp        = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

# pager options
set pager_index_lines   = 10                                     # number of index lines to show
set pager_context       = 5                                      # number of context lines to show
set pager_stop                                                   # don't go to next message automatically
set menu_scroll                                                  # scroll in menus
set smart_wrap                                                   # don't split words
set tilde                                                        # show tildes like in vim
unset markers                                                    # no ugly plus signs
set quote_regexp        = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
set status_on_top                                                # as you'd expect
auto_view text/html                                              # view html automatically
alternative_order text/plain text/enriched text/html             # save html for last
auto_view text/calendar                                          # view ical files
alternative_order text/plain text/html text/*

# formats
set date_format         = "%d-%m-%y at %I:%M%P"

# composing mail
set realname            = "Tim Gossett"
set envelope_from                                                # which from?
set sig_dashes                                                   # dashes before my signature
set edit_headers                                                 # show headers when composing
set fast_reply                                                   # skip to compose when replying
set fcc_attach                                                   # save attachments with the body
set mime_forward                                                 # forward attachments as part of body
set mime_forward_rest                                            # include attachments
set forward_format      = "Fwd: %s"                              # format for subject when forwarding
set forward_decode                                               # decode when forwarding
set attribution         = "On %d, %n wrote:"                     # set the attribution
set reply_to                                                     # reply to Reply to: field
set reverse_name                                                 # reply as whomever it was to
set include                                                      # include message in replies
set forward_quote                                                # include message in forwards
set signature="echo Tim |"                                       # thread start (i.e., message not replied)
set pgp_decode_command="/usr/local/bin/krgpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_verify_command="/usr/local/bin/krgpg --status-fd=2 --no-verbose --quiet --batch --output - --verify %s %f"
set pgp_decrypt_command="/usr/local/bin/krgpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_sign_command="/usr/local/bin/krgpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --detach-sign --textmode %?a?-u %a? %f"
set pgp_clearsign_command="/usr/local/bin/krgpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --textmode --clearsign %?a?-u %a? %f"
set pgp_import_command="/usr/local/bin/krgpg --no-verbose --import %f"
set pgp_export_command="/usr/local/bin/krgpg --no-verbose --export --armor %r"
set pgp_verify_key_command="/usr/local/bin/krgpg --verbose --batch --fingerprint --check-sigs %r"
set pgp_list_pubring_command="/usr/local/bin/krgpg --no-verbose --batch --quiet --with-colons --with-fingerprint --with-fingerprint --list-keys %r"
set pgp_list_secring_command="/usr/local/bin/krgpg --no-verbose --batch --quiet --with-colons --with-fingerprint --with-fingerprint --list-secret-keys %r"
set pgp_good_sign="^\\[GNUPG:\\] GOODSIG"
set pgp_decryption_okay="^\\[GNUPG:\\] DECRYPTION_OKAY"

# headers to show
ignore *                                                         # ignore all headers
unignore from: to: cc: date: subject:                            # show only these
hdr_order from: to: cc: date: subject:                           # and in this order

source ~/.mutt/colors.muttrc                                     # source colors file
source ~/.mutt/accts/red.muttrc

# these just give me headaches
bind index,pager \#     noop
bind index i            noop

# bindings
bind index gg           first-entry             # jump to top
bind index G            last-entry              # jump to bottom
bind index D            purge-message
bind index J            next-unread
bind index K            previous-unread
bind index w            set-flag
bind index W            clear-flag
bind index,pager R      group-reply             # reply-all
bind pager q            exit
bind pager /            search
bind pager <down>       next-line
bind pager j            next-line
bind pager <up>         previous-line
bind pager k            previous-line
bind index,pager \Cd    half-down
bind index,pager \Cu    half-up
bind pager gg           top
bind pager G            bottom
bind pager J            next-undeleted
bind pager K            previous-undeleted
bind compose p          pgp-menu
bind attach <return>    view-mailcap

# macros
macro index \Cr      "<tag-prefix><clear-flag>N"               "mark tagged messages as read"
macro index <F1> '<sync-mailbox><enter-command>source ~/.mutt/accts/green.muttrc<enter><change-folder>!<enter>'
macro index <F2> '<sync-mailbox><enter-command>source ~/.mutt/accts/red.muttrc<enter><change-folder>!<enter>'
macro index <F3> '<sync-mailbox><enter-command>source ~/.mutt/accts/blue.muttrc<enter><change-folder>!<enter>'

macro compose \Cg    "Fgpg --clearsign\ny"
macro compose \Cp    "Fgpg --clearsign\ny^T^Uapplication/pgp; format=text; x-action=sign\n"
macro compose Y pfy  "send mail without pgp"

